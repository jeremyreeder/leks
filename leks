#!/usr/bin/env python3

# LEKS: Leksikona Esperanta Komandlinia Sercxilo
# Copyright (C) 2022 Jeremy Reeder.
# https://github.com/jeremyreeder/leks

from sys import argv
import re

suffixes=['aĉ','ad','aĵ','an','ar','ĉjo','ebl','ec','eg','ej','em','end','er','estr','et','iĉ','id','ig','iĝ','il','in','ind','ing','ism','ist','njo','obl','on','op','uj','ul','um','is','as','os','us','int','ant','ont','unt','it','at','ot','ut','iu','tiu','ĉiu','ia','tia','ĉia']
prepositions=['pri','super','trans','post','kontraŭ','inter','ĉirkaŭ','kiel','ĉe','antaŭ','post','sub','apud','preter','de','per','apud','dum','krom','por','pro','el','en','sekva','sur','po','plus','ĉirkaŭ','ekde','ol','tra','ĝis','al','kun','laŭ','for','anstataŭ','ekster','pre']
conjunctions=['kaj','sed','nek','aŭ']
prefixes=['bo','dis','eks','ek','fi','ge','mal','mis','pra','re']+prepositions+conjunctions
roots=['zum','zorg','zon','zizel','zink','zingibr','zibel','zenit','zebr','vund','vultur','vulp','vulkan','vual','vost','vort','vom','volv','volupt','volum','volont','vol','vokal','vok','vojaĝ','voj','voĉ','vizit','vizier','vizaĝ','viv','vitriol','vitr','viŝ','virtuoz','virt','virg','vir','vipur','vip','violonĉel','violon','viol','vintr','vind','vinagr','vin','vilaĝ','vil','vikari','vigl','vidv','vid','vic','viburn','viand','vi','vezir','vezik','vetur','veter','vet','vestibl','veŝt','vest','vespert','vesper','vesp','veruk','vertikal','vertebr','vert','verst','verŝ','vers','vermiĉel','verm','verk','verg','verdigr','verd','verb','ver','ventr','ventol','vent','venk','venĝ','venen','vendred','vend','ven','velur','velk','velen','vel','vekt','vek','vejn','veget','vaz','vat','vast','vasal','vart','varm','variol','varb','vapor','vant','vanil','vang','van','vals','valiz','val','vaks','vakcini','vagon','vag','vafl','uzurp','uz','util','uter','urtik','urs','urogal','urn','urin','urb','ur','unu','universitat','universal','univers','uniform','ung','unc','umbilik','um','uln','ulm','ulcer','ul','uj','tut','tuŝ','tus','turt','turnir','turn','turment','turkis','turd','turban','tur','tumult','tulip','tul','tuk','tuf','tuber','tub','tualet','trut','trunk','trumpet','trul','truf','trud','tru','trov','trotuar','trot','tropik','tron','tromp','tromb','trog','tro','trivial','tritik','trip','trink','tril','trikot','trik','tribun','tri','trezor','tren','tremp','tremol','trem','tref','trankvil','tranĉ','trakt','trajt','traĥe','traf','traduk','trab','tort','tornistr','torn','torf','tord','torĉ','topaz','tondr','tond','ton','tombak','tomb','toler','tol','titol','tir','tint','tine','timon','timian','tim','tili','tikl','tigr','tibi','tez','tetra','tetr','tetan','testud','testik','testament','terur','tern','termin','terebint','teras','ter','tent','tenden','tend','ten','tempi','temp','tem','teler','teks','tegment','teg','ted','te','tavol','taŭg','tas','tapiŝ','tapet','tan','tambur','talp','tali','talent','taks','tajlor','tag','taft','taĉment','tabul','tabl','tabel','taban','tabak','ŝvit','sving','sven','ŝvel','svat','ŝut','suspekt','surtut','surpriz','surd','supr','supoz','superstiĉ','super','sup','sun','sum','ŝultr','sulk','sulfur','ŝuld','suker','sukces','sukcen','suk','sufok','sufiĉ','sufer','sud','suĉ','substantiv','sublimat','subjekt','subit','sub','ŝu','sturn','sturg','ŝtup','stup','stuk','student','strut','ŝtrump','strik','strig','stri','strek','streĉ','strat','strang','strab','ŝtop','ŝton','stomak','ŝtof','stof','ŝtip','stip','stil','stertor','stern','sterled','sterk','step','ŝtel','stel','steb','ŝtat','stat','star','stang','standard','stan','stamp','ŝtal','stal','staci','stabl','stab','ŝraŭb','ŝrank','sput','ŝpruc','spron','sprit','spong','spit','spirit','spir','spion','spinac','ŝpin','spin','spik','spic','spez','spert','spegul','spec','spat','ŝpar','spalir','spac','ŝovel','sovaĝ','ŝov','sort','sorp','sorik','sorĉ','sorb','sopran','sopir','sonor','sonĝ','son','somer','solv','solen','soldat','sol','sojl','soif','sof','societ','sobr','ŝnur','ŝmir','smerald','ŝmac','ŝlos','ŝlim','skvam','skurĝ','skulpt','sku','skrofol','skrib','skrap','skorpi','skorbut','skolop','sklav','skiz','skerm','skatol','skarp','skarlat','skarab','skapol','skal','skadr','skabi','situaci','sitel','sirop','ŝirm','siring','ŝir','ŝip','ŝink','sinjor','singult','ŝind','sincer','simpl','simil','simi','ŝim','silvi','silur','silk','silik','silent','ŝild','silab','signif','signal','sign','sigel','sieĝ','sid','sibl','ŝi','si','sezon','sever','servut','servic','serv','serur','serpent','serioz','seri','serĝent','ŝerc','serĉ','Septembr','sepi','sentenc','sent','send','senc','sen','semajn','sem','ŝelk','selakt','ŝel','sel','sekv','sekund','seks','sekretari','sekret','sekc','sekal','sek','seĝ','seg','seb','sciur','scienc','sci','sceptr','sav','ŝaŭm','saŭc','satur','ŝat','sat','ŝark','sark','ŝarĝ','ŝarg','sardel','sap','sankt','ŝanĝ','sang','ŝancel','san','sambuk','ŝam','sam','salvi','salut','salt','salpetr','salon','ŝalm','salm','salik','salat','salamandr','salajr','ŝal','sal','sakr','ŝakal','ŝak','sak','ŝajn','sagac','saĝ','sag','safran','safir','ŝaf','sabl','sabat','ruz','rust','rum','rul','rukt','ruin','ruĝ','rubrik','ruben','ruband','rub','rozari','roz','rot','rostr','rost','rosmaren','rosmar','ros','ronk','rond','romp','rod','riz','riverenc','river','risort','risk','riproĉ','ripoz','ripet','rip','rinocer','ring','rimen','rimed','rimark','rim','rilat','rikolt','rigl','rigid','rigard','rifuz','rifuĝ','rif','rid','ricev','riĉ','ribel','rib','rezin','rezerv','rev','ret','restoraci','rest','respond','respekt','renvers','rent','renkont','ren','rempar','rembur','rem','religi','rel','rekt','rekrut','rekompenc','rekomend','regul','regol','regn','registr','region','regiment','regal','reĝ','reg','redaktor','redakci','reciprok','re','raz','rav','raŭp','raŭk','rat','rast','rasp','raport','rapir','rapid','rap','ranunkol','rang','rand','ranc','ran','ramp','rakont','rajt','rajd','rafin','rafan','radik','radi','rad','rabot','raben','rabat','rab','putr','putor','put','puŝ','pus','purpur','pur','pupil','pup','punt','punkt','punĉ','punc','pun','pump','pumik','pulvor','pulv','pulm','pul','pugn','pudr','pudel','publik','pruv','prunt','prunel','prun','prujn','prudent','proviz','provinc','proverb','prov','prosper','propr','propon','pronom','promontor','promes','promen','proksim','prokrast','proklam','progres','profund','profit','profet','profesi','produkt','proces','pro','privilegi','privat','printemp','princ','primol','pri','prezid','prezent','prez','pretend','pretekst','pret','pres','prepozici','prepar','pren','premi','prem','preĝ','prefer','predikat','predik','preciz','precip','prav','pram','praktik','pra','pov','potenc','potas','pot','postul','posten','poŝt','post','posed','poŝ','portret','porter','port','pork','porfir','pord','porci','porcelan','por','popol','popl','pont','ponard','pom','polv','polus','polur','poligon','polic','pokal','poent','pluv','pluŝ','plumb','plum','plug','plot','plor','plik','plezur','plet','plend','plen','plekt','plaŭd','platen','plat','plastr','plant','plank','planed','pland','plan','plafon','plad','plaĉ','plac','piz','pistol','pistak','piŝt','pist','piroz','pirol','pirit','pir','pips','pipr','pip','pionir','pint','pini','pingl','pinĉ','pin','pilot','pilol','pilk','piked','pik','pig','piedestal','pied','pice','pi','pez','petrosel','petromiz','petrol','petol','pet','pest','pes','person','persist','persik','persekut','peron','permes','perlamot','perl','perk','peritone','pergamen','perfid','perfekt','pere','perdrik','perd','perĉ','per','pep','pentr','Pentekost','pent','pensi','pens','penik','penetr','pendol','pend','pen','pelv','pelt','pelikan','pel','pekl','pek','pejzaĝ','peg','pedik','peĉ','pec','pavim','pav','paŭz','patrol','patr','pat','pastr','pastinak','pastel','pasteĉ','paŝt','past','pasport','Pask','pasi','paser','pasament','paŝ','pas','paru','particip','parti','parter','part','parol','paroĥ','parker','park','parget','parfum','parentez','parenc','pardon','parazit','paraliz','paradiz','parad','par','papili','paper','papav','papag','pap','pantofl','panter','pantalon','pan','palpebr','palp','palm','palis','paletr','palat','palac','pal','pak','pajl','paĝi','paĝ','pag','paf','pacienc','pac','oval','ov','ot','ostr','ost','osced','ornam','orient','orgen','orf','orel','ordon','ordinar','orden','ord','oranĝ','orakol','or','oportun','opini','opal','op','ont','onkl','ond','on','ombrel','ombr','omar','oliv','ole','okzal','okup','okul','Oktobr','oksikok','oksigen','okcident','okaz','oft','oficir','ofic','ofer','ofend','odor','obstrukc','obstin','observ','oblat','obl','objekt','obe','nutr','numer','nul','nuks','nuk','nud','nub','nuanc','novic','Novembr','nov','notari','not','nord','nominativ','nombr','nom','nokt','nobl','nobel','nj','nivel','nigr','niĉ','ni','nev','net','nest','nepr','nep','negoc','negliĝ','neĝ','neces','nebul','naz','naŭz','natur','nask','narcis','nap','nanken','najtingal','najl','najbar','naĝ','naci','mut','mustel','mustard','muslin','muskol','muskat','musk','muŝ','mus','murmur','mur','mult','mul','muk','muĝ','muf','muel','mov','moŝt','most','morus','morter','mort','mord','morbil','mor','mops','monument','montr','mont','monstr','moned','mond','monat','monarĥ','monaĥ','mon','moment','mol','mok','modest','moder','model','mod','mizer','mister','misi','mirtel','mirt','mirh','mir','miozot','miop','miogal','minut','minac','min','milit','mili','mil','miks','migr','migdal','mien','miel','mi','mezur','mez','mev','meti','metal','met','Mesi','mes','merl','merkred','meriz','merit','menton','ment','mensog','mend','memor','membran','membr','mem','melon','melk','meleagr','mel','mejl','meĥanik','medit','medalion','medal','meĉ','mebl','matur','matrac','maten','mat','mastr','mastik','mast','mason','mask','masiv','maŝin','maŝ','mas','martel','Mart','marŝal','marŝ','maroken','marmot','marmor','markot','mark','mard','marcipan','marĉand','marĉ','mar','mantel','manovr','mank','manik','manier','mangan','manĝ','mana','man','mam','malic','maleol','mal','makzel','makul','makler','majstr','majest','Maj','maiz','magnet','magi','magazen','maĉ','mac','lutr','lut','lustr','lupol','lup','lund','lunatik','lun','lumb','lum','lul','luks','lud','lu','lot','lorn','lonicer','long','lol','lokomotiv','lok','lojt','loĝi','loĝ','log','lod','livre','liver','liut','liter','litani','lit','lir','lip','link','lini','lingv','lin','limonad','limak','lim','lili','likvor','likvid','liken','lign','lig','lien','libr','liber','libel','lian','li','levkoj','lev','leŭtenant','leter','lesiv','lert','lern','lepr','lepor','leopard','leontod','leon','lentug','lent','leksikon','lekant','lek','legom','legi','legend','leĝ','leg','led','lecion','lavang','lav','laŭt','laŭr','laŭd','laŭb','laŭ','last','las','larv','larm','laring','larĝ','lard','lanug','lantern','lang','land','lan','lampir','lamp','lam','lakt','laks','lake','lak','lag','laf','lad','lacert','laĉ','lac','labor','kvitanc','kvit','kviet','kverk','kvartal','kvart','kvarc','kvaranten','kvant','kuz','kuv','kutim','kusen','kuŝ','kurten','kurier','kurb','kurator','kuraĝ','kurac','kur','kupr','kupol','kup','kunikl','kun','kulp','kuler','kul','kukurb','kukum','kukol','kuk','kuir','kugl','kuf','kudr','kubut','kub','krut','krust','krur','krup','kruel','krud','kruĉ','kruc','kroz','krop','kronik','kron','krokodil','kroĉ','kriz','kritik','kristal','Krist','krist','krisp','kripl','kring','kriminal','krim','kribr','kri','krev','kret','kresk','krepusk','krep','kren','krem','kred','kre','kravat','krater','kratag','krani','kran','kramp','kraken','krak','krajon','krad','kraĉ','kovr','kovert','kov','koturn','koton','kot','kostum','kost','korv','kort','korpus','korporaci','korp','kornic','korn','kork','korespond','korekt','kord','korb','koran','kor','kopi','konvulsi','konvink','konvert','konven','konval','konus','kontuz','kontur','kontraŭ','kontrakt','kontor','kontent','kontant','konsum','konstru','konstern','konstat','konstant','konspir','konsonant','konsol','konsist','konsil','konsider','konserv','konsent','konsekvenc','konscienc','konsci','konkurs','konkur','konklud','konk','konjunkci','konjugaci','konjekt','konfuz','konform','konfit','konfirm','konfid','konfes','kondut','konduk','kondolenc','kondiĉ','kondamn','koncern','kon','komunik','komuni','komun','kompres','kompren','kompost','komplez','kompat','kompar','komod','komiz','komitat','komisi','komfort','komerc','komentari','komenc','kombin','komb','komand','kom','kolubr','kolport','kolor','kolon','kolomb','kolofon','kolimb','kolibr','koler','kolekt','koleg','kolbas','kol','koks','kokos','kokluŝ','koket','kokcinel','kok','kojn','koĉenil','kobold','kobalt','koaks','kned','knab','kluz','klub','kloŝ','klopod','klister','klin','klimat','kler','klav','klas','klarnet','klar','klap','klaft','kitel','kis','kiras','kil','kest','kerub','kern','ker','ken','kelner','kelk','kel','kegl','kaze','kaz','kaviar','kavern','kavalir','kav','kaŭz','kaŭteriz','katun','katen','katarakt','katar','kataplasm','kat','kastr','kastor','kastel','kaŝtan','kask','kaserol','kaŝ','kas','karusel','karton','kartoĉ','kartilag','kartav','kart','karpen','karp','karot','karob','karo','karnaval','karmin','kariofil','kares','kardel','kard','karb','karas','karakter','karaf','karaben','kar','kapucen','kapuĉ','kapt','kapsul','kapric','kapreol','kapr','kapot','kapor','kapon','kapitulac','kapitel','kapitan','kapel','kapabl','kap','kanvas','kantor','kantarid','kant','kankr','kandel','kand','kancelier','kancelari','kanari','kanap','kanajl','kanab','kan','kamp','kamomil','kamlot','kamizol','kamfor','kamer','kamen','kamel','kambi','kalumni','kalson','kalkul','kalkan','kalk','kalikot','kalik','kalfatr','kaleŝ','kaldron','kal','kajut','kajer','kahel','kaĝ','kaf','kaduk','kadr','kaĉ','juvel','just','ĵur','jup','juniper','Juni','jung','jun','Juli','juk','jugland','juĝ','jug','ĵongl','j marque le pluriel; ex. hom','ĵet','jes','ĵaŭd','jasmen','jar','Januar','ĵaluz','jak','izol','it','ist','is marque le passé; ex. far','ir','invit','intrig','intim','intest','interpunkci','intern','intermit','interjekci','interes','inter','intenc','int','insult','insul','instrukci','instru','institut','instig','inspir','insign','insid','insekt','inokul','inklin','ink','iniciat','ingven','inĝenier','ing','infuz','influ','infer','infekt','infan','industri','indulg','indign','indiferent','ind','incit','in','impres','implik','imperi','imit','i marque l’infinitif; ex. laŭd','imag','ilumin','ili','il','iĥtiokol','iĝ','ig','idol','idili','id','ibis','huz','husar','hund','humor','humil','huf','hotel','hosti','hortulan','horloĝ','horizontal','horde','ĥor','hor','hont','honor','honest','hom','ĥoler','hok','histrik','histori','hiskiam','hirund','hirud','hipokrit','ĥimer','hidrogen','hidrarg','hero','herni','herez','hered','herb','hepat','ĥemi','help','hel','hejt','hejm','heder','haven','hav','haŭt','harp','haring','hard','har','ĥaos','hamstr','halt','haladz','hal','hak','hajl','gvid','gvardi','guvern','gut','ĝust','gust','gurd','gum','guf','gudr','ĝu','grup','gru','grot','groŝ','gros','griz','grinc','grimac','gril','grifel','gri','grenad','gren','gravur','graved','grav','gratul','grat','gras','granit','grand','granat','gramatik','grajn','graf','grad','graci','gorĝ','golf','ĝoj','gobi','glut','glu','glor','glob','glit','glim','glav','glat','glas','gland','glan','glad','glaci','gitar','ĝiraf','gips','ĝib','gest','ĝerm','genu','ĝentil','gent','genot','genitiv','generaci','ĝen','ĝem','gelaten','ge','gazet','gazel','gast','gas','gargar','ĝarden','gard','garb','garanti','gant','gamaŝ','gam','galoŝ','galon','galeri','galanteri','gal','gajn','gajl','gaj','gad','fut','fusten','fuŝ','furunk','furioz','furaĝ','funt','fung','funel','funebr','fundament','fund','fum','fulm','fulg','ftiz','frunt','frukt','frugileg','fru','frot','frost','front','fromaĝ','friz','fripon','fringel','fring','freŝ','frenez','fremd','fraŭl','frat','frap','frangol','franĝ','frand','framb','framason','fraksen','frakas','frak','fraj','fragment','frag','fost','fosfor','fos','fortik','fortepian','fort','forn','formik','form','fork','forges','forĝ','for','fontan','font','fond','foli','fokus','fok','fojn','foj','foir','flut','fluid','flug','flu','flos','flor','flok','flirt','flik','fleks','flegm','fleg','flav','flat','flar','flank','flanel','flan','flam','flag','fistul','fiŝ','firm','fingr','fin','filtr','filik','fil','figur','fig','fier','fidel','fid','fibr','fianĉ','festen','fest','fervor','ferment','ferm','ferdek','fer','fenkol','fenestr','fend','femur','felt','feliĉ','fel','feĉ','Februar','febr','fe','fazan','favor','fav','faŭk','fast','fason','fask','farun','fart','farm','faring','far','fantom','fanfaron','fand','famili','fam','fals','falk','fald','falĉ','falbal','fal','faktur','fak','fajr','fajl','fajf','fajenc','fag','faden','facil','facet','fabrik','fabl','fabel','fab','ezok','evit','etern','eter','etend','etat','etaĝ','et','estr','esting','estim','est','esprim','esplor','esper','eskadr','esenc','escept','eŝafod','erp','ermit','ermen','erinac','erar','er','epolet','epok','episkop','envi','enu','entuziasm','entrepren','enigm','en','eminent','embusk','embri','embaras','e marque l’adverbe; ex. bon','emajl','em','elokvent','elekt','elefant','elast','el','ekzist','ekzil','ekzerc','ekzempler','ekzempl','ekzekut','ekzamen','ekstrem','ekstr','eksterm','ekspozici','eksplod','eksped','ekskurs','ekscit','ekscelenc','eks','ek','ej','eĥ','egal','eg','efik','efektiv','edz','eduk','edif','ec','ebon','ebl','eben','dung','dum','duk','dub','du','dron','drog','drink','dres','draŝ','drapir','drap','drak','dot','dors','dorn','dorm','dorlot','donac','don','domen','domaĝ','dom','dolor','dolĉ','divid','divers','diven','distrikt','distr','disting','distil','disput','dispon','diskont','dis','direkt','dir','dimanĉ','diligent','dikt','dik','digest','dig','difin','diferenc','difekt','didelf','diboĉ','diamant','diabl','Di','dezir','dezert','deviz','dev','detru','detal','desegn','deput','denunc','dent','dens','denar','demon','demand','delir','delikat','delfen','dekstr','dekliv','deklinaci','deĵor','degrad','degener','degel','defend','dediĉ','deĉifr','decid','Decembr','dec','de','daŭr','datur','dativ','dat','dank','danĝer','dand','danc','damask','dam','daktil','da de (après les mots marquant mesure',' poids',' nombre) | is used instead of de after words expressing weight or measure; e. g. funt','col','ĉokolad','ĉj','ĉiz','civiliz','ĉiu','citron','citr','cit','cirkuler','cirkonstanc','cirkel','ĉirkaŭ','cir','cipres','cindr','cinam','cinabr','cimbal','cim','cikori','cikoni','cikatr','ĉikan','cign','cigared','cigar','ĉifon','cifer','ĉif','ĉiel','ci','ĉeval','ceter','ĉes','cerv','cert','ĉerp','ĉerk','ĉeriz','cerb','ĉen','ĉemiz','cement','ĉel','cel','cejan','ĉef','cedr','ced','ĉast','ĉas','ĉarpi','ĉarpent','ĉarnir','ĉarm','ĉarlatan','ĉapitr','ĉapel','ĉap','ĉan','ĉampan','ĉambr','ĉambelan','ĉam','ĉagren','buton','butik','buter','buŝel','buŝ','burĝon','burĝ','burd','bulk','buljon','bulb','bul','bukl','buked','buk','bufed','buf','bud','buĉ','bubal','bub','brut','brust','brun','brul','bru','brov','bros','bronz','brog','brod','briliant','bril','brik','brid','bret','brav','brasik','brank','brand','branĉ','bran','bram','brak','bov','botel','bot','bors','border','bord','boraks','bor','bon','bombon','bol','boj','boben','boat','boa','bo','blu','blov','blond','blind','blek','blat','blank','bismut','biskvit','bird','bind','bier','bien','bezon','betul','bet','best','ber','benk','ben','beladon','bel','bek','bedaŭr','bed','bazar','batal','bat','baston','bastion','bast','bask','bark','barel','barĉ','barbir','barb','barakt','bar','bapt','bant','band','ban','bambu','balustrad','balen','baldaken','balbut','balanc','bala','bak','bajonet','bagatel','babil','azot','azen','aviz','avid','avert','aventur','aven','avel','avar','av','aŭtun','aŭskult','Aŭgust','aŭd','atut','atripl','ating','atest','atent','atend','atenc','atak','at','aspid','asparag','asign','asekur','as','artrit','artiŝok','artikol','artik','artifik','art','arsenik','arogant','arm','arleken','ark','arĥitektur','argument','argil','arĝent','arest','aren','ardez','arde','arĉ','arbitr','arb','aranĝ','arane','ar','aprob','April','apr','apog','aplaŭd','aper','aparten','apart','Anunciaci','antimon','antikv','antaŭ','ant','anstataŭ','anser','anonc','ankr','aniz','anim','angul','angil','anĝel','anas','ananas','an','amuz','ampleks','amoniak','amik','amfibi','amel','ambos','amas','am','alun','alumet','alud','altern','alte','altar','alt','aln','almoz','alk','ali','alcion','alaŭd','al','akv','akuzativ','akuŝ','aks','akrid','akr','akompan','akn','akir','akcipitr','akcept','akcent','akcel','akar','ajl','aĵ','agrabl','agord','agl','agac','aĝ','ag','afer','afekt','afabl','aer','adverb','adult','ador','admon','admir','administr','adjektiv','ad','acid','aĉet','acer','absint','absces','abrikot','abon','abomen','ablativ','abi','abel','abat']

known_words=suffixes+prefixes+roots

def has_vowel(word):
	for vowel in ['a','e','i','o','u']:
		if vowel in word:
			return True
	return False

def hyphenate_unended(word):
	if len(word)>1:
		if word not in known_words:
			for suffix in roots+suffixes:
				if len(word)>len(suffix)+1 and word.endswith(suffix) and has_vowel(word[:-len(suffix)]):
					for unended_word in hyphenate_unended(word[:-len(suffix)]):
						yield unended_word+'-'+suffix
			for prefix in prefixes+prepositions+roots:
				if len(word)>len(prefix)+1 and word.startswith(prefix) and has_vowel(word[len(prefix):]):
					for unprefixed_word in hyphenate_unended(word[len(prefix):]):
						yield prefix+'-'+unprefixed_word
		if word[-1] in ['a','e','o'] and word[:-1] in known_words:
			word=word[:-1]+word[-1].upper()
	yield word

def hyphenate(word):
	if word[-1] in ['N','J']:
		for unended_word in hyphenate(word[:-1]):
			yield unended_word+word[-1]
	if word[-1] in ['O','A','E','I']:
		for unended_word in hyphenate_unended(word[:-1]):
			yield unended_word+word[-1]
	word=re.sub(r'^-','',word)
	return hyphenate_unended(word)

def explain(hyphenated_word):
	results=[]
	parts=hyphenated_word.split('-')
	for part in parts:
		result=''
		unended_part=part
		for ending in ['N','J','O','A','E','I']:
			unended_part=unended_part.replace(ending,'')
		if unended_part in prefixes:
			result+='prefikso "'+unended_part+'"'
		elif unended_part in prepositions:
			result+='prepozicio "'+unended_part+'"'
		elif unended_part in suffixes:
			result+='sufikso "'+unended_part+'"'
		elif unended_part in roots:
			result+='radiko "'+unended_part+'"'
		else:
			result+='nekonata radiko '+'"'+unended_part+'"'
		if part[-1]=='N':
			result='akuzativa '+explain(part[:-1])
		elif part[-1]=='J':
			result='multenombra '+explain(part[:-1])
		elif part[-1]=='O':
			result='substantivo de '+explain(part[:-1])
		elif part[-1]=='A':
			result='adjektivo de '+explain(part[:-1])
		elif part[-1]=='E':
			result='adverbo de '+explain(part[:-1])
		elif part[-1]=='I':
			result='verbo de '+explain(part[:-1])
		results.append(result)
	return '\n'.join(results)

if len(argv)<2 or argv[1][0]=='-':
	print('Donu al mi vorton, kaj mi ekspligos ĝin.')
	exit(1)
for word in argv[1:2]:
	if len(word)<5:
		print('Demandu pri vorton pli malfacilan.')
		exit(1)
	normalized_word=word.lower().replace('gx','ĝ').replace('sx','ŝ').replace('cx','ĉ').replace('ux','ŭ').replace('jx','ĵ')
	normalized_word=re.sub(r'(?=.{2,})[iaou]s$','i',normalized_word)
	print('La vorto "'+normalized_word+'" povus eksplikati tiel:')
	interpretations=dict()
	def upper_repl(match):
		return match.group(1).upper()
	enduppered_word=re.sub(r'(aj?n?|oj?n?|en?|i)$',upper_repl,normalized_word)
	for hyphenation in hyphenate(enduppered_word):
		explanation=explain(hyphenation)
		if 'nekonata ' not in explanation:
			interpretations[hyphenation.lower()]=explanation
	prior_hyphenated_length=0
	for hyphenation in sorted(interpretations,key=len):
		if prior_hyphenated_length!=0 and len(hyphenation)>prior_hyphenated_length:
			break
		prior_hyphenated_length=len(hyphenation)
		print('\t'+hyphenation)
		print('\t\t'+interpretations[hyphenation].replace('\n','\n\t\t'))
		exit(0)
	print('Ju, mi ne komprenas tiun vorton.')
	exit(1)
